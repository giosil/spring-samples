!function(t){t.showInfo=function(t,e){e=e||"Messaggio",window.BSIT.notify({state:"info",title:e,message:t})},t.showSuccess=function(t,e){e=e||"Messaggio",window.BSIT.notify({state:"success",title:e,message:t})},t.showWarning=function(t,e){e=e||"Messaggio",window.BSIT.notify({state:"warning",title:e,message:t})},t.showError=function(t,e){e=e||"Messaggio",window.BSIT.notify({state:"error",title:e,message:t})},t.dropdownBtn=function(t,e,i,n){return n='<button id="'+t+'-b" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle '+(n=void 0===n?"btn btn-default":n)+'">'+e+' <i class="fa fa-caret-down"></i></button>',n=(n+='<div id="'+t+'-m" tabindex="-1" role="menu" aria-hidden="true" class="dropdown-menu" style="max-height:180px;overflow-y:auto;">')+'<div class="link-list-wrapper"><ul id="'+t+'-l" class="link-list">',i&&(n+=i),n+="</ul></div></div>"}}(APP=APP||{}),function(a){function t(){return window.location.origin}a.getURLServices=t;i.prototype.before=function(){window.BSIT.showLoader()},i.prototype.after=function(){window.BSIT.hideLoader()},i.prototype.sim=function(i,n,o,s,r){var a=this;console.log("sim("+i+","+n+")",o),i=i?i.toLowerCase():"get",this.before(),setTimeout(function(){a.after();var t,e=null;null!=(e=a.mres?"function"==typeof(t=(t=a.mres[i+"_"+n])||a.mres[i])?t(n,o):t:e)?s&&s(e):r&&r({message:"No mock data for "+i+" "+n})},500)},i.prototype.get=function(t,e,i,n){this.mock?this.sim("get",t,e,i,n):this._get("GET",t,e,i,n)},i.prototype.delete=function(t,e,i,n){this.mock?this.sim("delete",t,e,i,n):this._get("DELETE",t,e,i,n)},i.prototype.post=function(t,e,i,n){this.mock?this.sim("post",t,e,i,n):this._send("POST",t,e,i,n)},i.prototype.put=function(t,e,i,n){this.mock?this.sim("put",t,e,i,n):this._send("PUT",t,e,i,n)},i.prototype.patch=function(t,e,i,n){this.mock?this.sim("patch",t,e,i,n):this._send("PATCH",t,e,i,n)},i.prototype._get=function(e,i,t,n,o){var s=this,t=(e=e||"GET",t?new URLSearchParams(t).toString():""),t=t?this.url+"/"+i+"?"+t:this.url+i;this.before(),fetch(t,{method:e}).then(function(t){if(s.after(),t.ok)return t.json();console.error("[HttpClient] "+e+" "+i+": HTTP "+t.status),o?o(new Error("HTTP "+t.status)):a.showError("Errore servizio","Si e' verificato un errore di servizio.")}).then(function(t){n&&n(t)}).catch(function(t){console.error("[HttpClient] "+e+" "+i+":",t),s.after(),o?o(t):a.showError("Errore servizio","Si e' verificato un errore di servizio.")})},i.prototype._send=function(e,i,t,n,o){var s=this,r=(e=e||"POST",this.url+"/"+i);this.before(),fetch(r,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){if(s.after(),t.ok)return t.json();console.error("[HttpClient] "+e+" "+i+": HTTP "+t.status),o?o(new Error("HTTP "+t.status)):a.showError("Errore servizio","Si e' verificato un errore di servizio.")}).then(function(t){n&&n(t)}).catch(function(t){console.error("[HttpClient] "+e+" "+i+":",t),s.after(),o?o(t):a.showError("Errore servizio","Si e' verificato un errore di servizio.")})};var e=i;function i(t){this.url=t||window.location.origin}a.HttpClient=e,a.http=new e(t())}(APP=APP||{});var APP,__extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=(!function(o){s=WUX.WComponent,__extends(e,s),e.prototype.add=function(t){return this.state||(this.state=[]),t&&this.state.push(t),this},e.prototype.render=function(){this.home||(this.home="/"),this._classStyle||(this._classStyle="mb-5 breadcrumb-container"),this.props||(this.props="/");var t=this._style?' style="'+this._style+'"':"",e=this._attributes?" "+this._attributes:"",i='<nav class="'+this._classStyle+'" aria-label="breadcrumb"'+t+e+">";if(i+='<ol class="breadcrumb"><li class="breadcrumb-item"><a href="'+this.home+'">Homepage</a><span class="separator">/</span></li>',this.state)for(var n=this.state.length,o=0;o<n;o++){var s=this.state[o],r=o<n-1?'<span class="separator">/</span>':"";"<"==n[0]?i+='<li class="breadcrumb-item">'+s+r+"</li>":i+='<li class="breadcrumb-item"><a href="#">'+s+r+"</a></li>"}return i+="</ol></nav>"};var s,t=e;function e(t,e,i,n){t=s.call(this,t||"*","Breadcrumb","/",e,i,n)||this;return t.rootTag="nav",t}o.Breadcrumb=t;r=WUX.WComponent,__extends(i,r),i.prototype.refresh=function(t,e,i,n){if(!i)return this.clear();var o=Math.floor(i/e);return 0<i%e&&o++,this.state=n,this.props=o,this.forceUpdate(),this},i.prototype.clear=function(){return this.state=0,this.props=0,this.forceUpdate(),this},i.prototype.updateState=function(t){this.state&&(e=document.getElementById(this.id+"-"+this.state))&&WUX.removeClassOf(e.parentElement,"active"),r.prototype.updateState.call(this,t=t||1);var e=document.getElementById(this.id+"-"+t);e&&WUX.addClassOf(e.parentElement,"active")},i.prototype.componentDidMount=function(){var i=this;if(this.props<1)this.root.innerHTML='<nav id="'+this.id+'" class="pagination-wrapper" aria-label="Paginazione"></nav>';else{var t='<nav id="'+this.id+'" class="pagination-wrapper" aria-label="Paginazione">';if(t+='<ul class="pagination">',1==this.state?t+='<li class="page-item disabled">'+this.getBtnPrev()+"</li>":t+='<li class="page-item">'+this.getBtnPrev()+"</li>",0<this.max&&this.props>this.max){var e=this.state-(this.max-2);e<2?e=1:(o=this.props-this.max+1)<e&&(e=o);for(var n=e;n<e+this.max;n++)t+=this.getPageItem(n,n==this.state)}else for(n=1;n<=this.props;n++)t+=this.getPageItem(n,n==this.state);this.state==this.props?t+='<li class="page-item disabled">'+this.getBtnNext()+"</li>":t+='<li class="page-item">'+this.getBtnNext()+"</li>",this.root.innerHTML=t+="</ul></nav>";for(var o=document.getElementById(this.id+"-p"),o=(o&&o.addEventListener("click",function(t){var e=i.state;1<e&&e--,i.setState(e)}),document.getElementById(this.id+"-n")),s=(o&&o.addEventListener("click",function(t){var e=i.state;e<i.props&&e++,i.setState(e)}),this),n=1;n<=this.props;n++)!function(e){var t=document.getElementById(s.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){i.setState(e)})}(n)}},i.prototype.getBtnPrev=function(){return'<button id="'+this.id+'-p" class="page-link" aria-label="Precedente"><span aria-hidden="true"><i class="fa fa-angle-left fa-lg"></i></span><span class="sr-only">Precedente</span></button>'},i.prototype.getBtnNext=function(){return'<button id="'+this.id+'-n" class="page-link" aria-label="Successiva"><span aria-hidden="true"><i class="fa fa-angle-right fa-lg"></i></span><span class="sr-only">Successiva</span></button>'},i.prototype.getPageItem=function(t,e,i){return i=i||""+t,e?'<li id="'+this.id+"-"+t+'" class="page-item" style="cursor:pointer;"><button aria-current="true" class="page-link" title="Pagina '+t+'">'+i+"</button></i>":'<li id="'+this.id+"-"+t+'" class="page-item" style="cursor:pointer;"><button class="page-link" title="Pagina '+t+'">'+i+"</button></i>"};var r,t=i;function i(t,e,i,n){t=r.call(this,t||"*","ResPages",0,e,i,n)||this;return t.rootTag="nav",t.max=5,t}o.ResPages=t;n=WUX.WComponent,__extends(a,n),a.prototype.refresh=function(t,e){this.state=t,this.props=e,this.forceUpdate()},a.prototype.updateState=function(t){var e=document.getElementById(this.id+"-"+this.state),e=(e&&WUX.removeClassOf(e,"active"),n.prototype.updateState.call(this,t),document.getElementById(this.id+"-"+this.state));e&&WUX.addClassOf(e,"active")},a.prototype.render=function(){if(!this.props)return'<div id="'+this.id+'"></div>';this.state||(this.state=1);for(var t="",e=1;e<=this.props;e++)t+='<li><a id="'+this.id+"-"+e+'" class="list-item" style="cursor:pointer;">Pagina '+e+"</a></li>";var i='<div id="'+this.id+'" class="page-dropdown dropdown">';return i+o.dropdownBtn(this.id,"Pagina "+this.state+" di "+this.props,t)+"</div>"},a.prototype.componentDidMount=function(){for(var i=this,t=document.getElementById(this.id+"-"+this.state),n=(t&&WUX.addClassOf(t,"active"),this),e=1;e<=this.props;e++)!function(e){var t=document.getElementById(n.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){console.log("[BtnPages] click (i="+e+")",t),i.setState(e)})}(e)};var n,t=a;function a(t){return n.call(this,t||"*","BtnPages")||this}o.BtnPages=t;d=WUX.WComponent,__extends(c,d),c.prototype.render=function(){this.state||(this.state=this.IPP[0]);for(var t="",e=0;e<this.IPP.length;e++){var i=this.IPP[e];t+='<li><a id="'+this.id+"-"+i+'" class="list-item" style="cursor:pointer;">'+i+" elementi</a></li>"}var n='<div class="page-dropdown dropdown">';return n+o.dropdownBtn(this.id,"Elementi per Pagina",t)+"</div>"},c.prototype.updateState=function(t){var e=document.getElementById(this.id+"-"+this.state),e=(e&&WUX.removeClassOf(e,"active"),d.prototype.updateState.call(this,t),document.getElementById(this.id+"-"+this.state));e&&WUX.addClassOf(e,"active")},c.prototype.componentDidMount=function(){for(var i=this,t=document.getElementById(this.id+"-"+this.state),n=(t&&WUX.addClassOf(t,"active"),this),e=0;e<this.IPP.length;e++)!function(t){var e=n.IPP[t],t=document.getElementById(n.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){console.log("[BtnItems] click (v="+e+")",t),i.setState(e)})}(e)};var d,t=c;function c(t){t=d.call(this,t||"*","BtnItems")||this;return t.IPP=[5,10,20,50,100],t.state=t.IPP[0],t}o.BtnItems=t}(APP=APP||{}),!function(s){var t,r=WUX.action,o=WUX.getAction,a=WUX.WUtil,e=(t=WUX.WComponent,__extends(i,t),i.prototype.render=function(){var n=this;this.brcr=new s.Breadcrumb,this.brcr.add("Comuni"),this.form=new WUX.WFormPanel(this.subId("form")),this.form.addRow().addTextField("name","Denominazione",{autofocus:!0}),this.btnFind=new WUX.WButton(this.subId("btnFind"),"Esegui ricerca","fa-search","btn-icon btn btn-primary","margin-right: 0.5rem;"),this.btnFind.on("click",function(t){n.doFind()});return this.table=new WUX.WTable(this.subId("tapp"),["Identificativo","Denominazione","Cod. Fiscale","Provincia","Vedi","Modifica"],["idComune","descrizione","fiscale","provincia","_v","_m"]),this.table.selectionMode="single",this.table.div="table-responsive",this.table.types=["s","s","s","s","w","w"],this.table.sortable=[1,3],this.table.on("click",function(t){var e,i,t=o(t,n);console.log("click a=",t),t&&t.ref&&(e=n.table.getState(),(i=a.indexOf(e,"idComune",t.ref))<0||(n.dlg.setProps(t.name),n.dlg.setState(e[i]),n.dlg.show(n)))}),this.table.onDoubleClick(function(t){n.dlg.setProps("view"),n.dlg.setState(t.data),n.dlg.show(n)}),this.btnReset=new WUX.WButton(this.subId("btnReset"),"Annulla","fa-undo","btn-icon btn btn-secondary"),this.btnReset.on("click",function(t){n.form.clear(),n.table.setState([]),n.form.focus()}),this.main=new WUX.WContainer,this.main.before(this.brcr).addRow().addCol("col-md-12").add(this.form).addRow("form-row justify-content-end").add(this.btnFind).add(this.btnReset).addRow().addCol("col-md-12").add(this.table),this.main},i.prototype.doFind=function(){var o=this;s.http.get("comuni",this.form.getState(),function(t){if(t&&t.length){for(var e=0,i=t;e<i.length;e++){var n=i[e];n._v=r("view",n.idComune,"fa-search"),n._m=r("edit",n.idComune,"fa-edit")}o.table.setState(t)}else s.showWarning("Nessun elemento presente")})},i);function i(){var n=t.call(this)||this;return n.dlg=new d(n.subId("dlg")),n.dlg.onHiddenModal(function(t){var e,i;n.dlg.ok&&(e=n.dlg.getProps(),i=n.dlg.getState(),e&&i&&console.log("dlg action,state",e,i))}),n}s.GUIComuni=e;n=WUX.WDialog,__extends(c,n),c.prototype.updateState=function(t){this.state=t,this.fp&&this.fp.setState(this.state)},c.prototype.getState=function(){return this.fp&&(this.state=this.fp.getState()),this.state},c.prototype.onClickOk=function(){return!0},c.prototype.onShown=function(){var t=this;setTimeout(function(){t.fp.focusOn("fiscale")})},c.prototype.clear=function(){this.fp&&this.fp.clear(),this.state=null};var n,d=c;function c(t){t=n.call(this,t,"DlgComune")||this;return t.title="Comune",t.fp=new WUX.WFormPanel(t.subId("fp")),t.fp.addRow(),t.fp.addTextField("idComune","Identificativo",{readonly:!0}),t.fp.addRow(),t.fp.addTextField("fiscale","Codice Fiscale"),t.fp.addRow(),t.fp.addTextField("provincia","Provincia"),t.fp.addRow(),t.fp.addTextField("descrizione","Denominazione"),t.fp.addRow(),t.fp.addTextField("idRegione","Codice Regione"),t.body.addRow().addCol("col-md-12").add(t.fp),t}s.DlgComune=d}(APP=APP||{}),!function(t){e=WUX.WComponent,__extends(n,e),n.prototype.render=function(){return this.brcr=new t.Breadcrumb,this.brcr.add("Documenti"),this.main=new WUX.WContainer,this.main.before(this.brcr).addRow().addCol("col-md-12").add("<p>Documentazione tecnica</p>"),this.main};var e,i=n;function n(){return e.call(this)||this}t.GUIDocumenti=i}(APP=APP||{}),!function(t){e=WUX.WComponent,__extends(n,e),n.prototype.render=function(){return this.brcr=new t.Breadcrumb,this.brcr.add("Informazioni"),this.main=new WUX.WContainer,this.main.before(this.brcr).addRow().addCol("col-md-12").add("<p>Informazioni di sistema</p>"),this.main};var e,i=n;function n(){return e.call(this)||this}t.GUIInfo=i}(APP=APP||{}),!function(t){e=WUX.WComponent,__extends(n,e),n.prototype.render=function(){return this.brcr=new t.Breadcrumb,this.brcr.add("Log"),this.main=new WUX.WContainer,this.main.before(this.brcr).addRow().addCol("col-md-12").add("<p>Consultazione log operazioni</p>"),this.main};var e,i=n;function n(){return e.call(this)||this}t.GUILogs=i}(APP=APP||{}),this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)});!function(t){function e(){this.dat=JSON.parse(localStorage.getItem("mockd")),this.seq=JSON.parse(localStorage.getItem("mocks")),this.dat||(this.dat={}),this.seq||(this.seq={})}e.prototype.clean=function(t){t=this.norm(t),this.dat[t]=[],this.seq[t]=0,localStorage.setItem("mockd",JSON.stringify(this.dat)),localStorage.setItem("mocks",JSON.stringify(this.seq))},e.prototype.clear=function(){this.dat={},this.seq={},localStorage.setItem("mockd",JSON.stringify(this.dat)),localStorage.setItem("mocks",JSON.stringify(this.seq))},e.prototype.inc=function(t){t=this.norm(t);var e=this.seq[t];return e?(this.seq[t]=++e,localStorage.setItem("mocks",JSON.stringify(this.seq)),e):(this.seq[t]=1,localStorage.setItem("mocks",JSON.stringify(this.seq)),1)},e.prototype.find=function(t,e){t=this.norm(t),console.log("[Mock] find "+t,e);var i=this.dat[t];if(!i)return[];if(e){for(var n=[],o=0;o<i.length;o++)this.match(i[o],e)&&n.push(i[o]);return n}return i},e.prototype.ins=function(t,e,i){if(t=this.norm(t),console.log("[Mock] ins "+t,e),!e)return null;var n=(n=this.dat[t])||[];return i&&!e[i]&&(e[i]=this.inc(t)),n.push(e),this.dat[t]=n,localStorage.setItem("mockd",JSON.stringify(this.dat)),e},e.prototype.upd=function(t,e,i){if(t=this.norm(t),console.log("[Mock] upd "+t,e),!e||!i)return null;var n=this.dat[t];if(!n)return null;for(var o=0;o<n.length;o++)if(n[o][i]==e[i])return n[o]=__assign(__assign({},n[o]),e),localStorage.setItem("mockd",JSON.stringify(this.dat)),n[o];return null},e.prototype.del=function(t,e,i){if(t=this.norm(t),console.log("[Mock] del "+t+", "+e+", "+i),!i||!e)return!1;var n=this.dat[t];if(!n)return!1;"object"==typeof e&&(e=e[i]);for(var o=-1,s=0;s<n.length;s++)if(n[s][i]==e){o=s;break}return!(o<0)&&(n.splice(o,1),this.dat[t]=n,localStorage.setItem("mockd",JSON.stringify(this.dat)),0==n.length&&(this.seq[t]=0,localStorage.setItem("mocks",JSON.stringify(this.seq))),!0)},e.prototype.read=function(t,e,i){if(t=this.norm(t),console.log("[Mock] read "+t+", "+e+", "+i),!e||!i)return null;var n=this.dat[t];if(!n)return null;for(var o=0;o<n.length;o++)if(n[o][e]==i)return n[o];return null},e.prototype.match=function(t,e){if(!t)return!1;if(!e)return!0;for(var i in e)if(e.hasOwnProperty(i)){var n=t[i],i=e[i];if("string"==typeof n){if(n.indexOf(i)<0)return!1}else if(n!=i)return!1}return!0},e.prototype.norm=function(t){if(!t)return"default";var e=t.indexOf("/");return(t=0<e?t.substring(0,e):t).trim().toLowerCase()},t.Mock=e}(APP=APP||{});